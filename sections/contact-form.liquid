{% comment %}
  Contact form section for contact page
{% endcomment %}

<div class="contact-form-section">
  <div class="contact-form-section__container">
    {% if section.settings.show_header %}
      <div class="contact-form-section__header">
        <h1 class="contact-form-section__title">
          {{ section.settings.title | default: 'Bize ulaşın, gerisini biz hallederiz' }}
        </h1>
        <div class="contact-form-section__description">
          <p>
            {{
              section.settings.description
              | default: 'Ürün bilgileri, gönderim detayları veya siparişle ilgili yardım gibi konularda size yardımcı olmaya hazırız. Aşağıdaki formu doldurun veya bize e-posta gönderin. Talebinizi mümkün olan en kısa sürede yerine getirebilmemiz için, varsa sipariş numaranızı da belirtin.'
            }}
          </p>
        </div>
      </div>
    {% endif %}

    <h2 class="visually-hidden">Contact form</h2>
    {% form 'contact', id: 'ContactForm', class: 'contact-form' %}
      {% if form.posted_successfully? %}
        <div class="contact-form__success">
          <p>Mesajınız için teşekkür ederiz. En kısa sürede size geri dönüş yapacağız.</p>
        </div>
      {% endif %}

      {% if form.errors %}
        <div class="contact-form__errors">
          <h3>Please correct the following errors:</h3>
          <ul>
            {% for field in form.errors %}
              <li>
                {% if field == 'form' %}
                  {{ form.errors[field] }}
                {% else %}
                  <a href="#ContactForm-{{ field }}">
                    {{- form.errors.translated_fields[field] | capitalize }}
                    {{ form.errors.messages[field] -}}
                  </a>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      <div class="contact-form__fields">
        <div class="contact-form__field">
          <input
            class="contact-form__input"
            autocomplete="name"
            type="text"
            id="ContactForm-name"
            name="contact[Name]"
            value="{% if form.name %}{{ form.name }}{% endif %}"
          >
          <label class="contact-form__label" for="ContactForm-name">Adınız</label>
        </div>

        <div class="contact-form__field {% if form.errors contains 'email' %}contact-form__field--error{% endif %}">
          <input
            autocomplete="email"
            type="email"
            id="ContactForm-email"
            class="contact-form__input"
            name="contact[email]"
            spellcheck="false"
            autocapitalize="off"
            value="{% if form.email %}{{ form.email }}{% endif %}"
            aria-required="true"
            required
          >
          <label class="contact-form__label" for="ContactForm-email">
            E-posta
            <span aria-hidden="true">*</span>
          </label>
        </div>
      </div>

      <div class="contact-form__field">
        <input
          type="tel"
          id="ContactForm-phone"
          class="contact-form__input"
          autocomplete="tel"
          name="contact[Phone number]"
          pattern="[0-9\-]*"
          value="{% if form.phone %}{{ form.phone }}{% endif %}"
        >
        <label class="contact-form__label" for="ContactForm-phone">Telefon numaranız</label>
      </div>

      <div class="contact-form__field">
        <textarea
          rows="10"
          id="ContactForm-body"
          class="contact-form__textarea"
          name="contact[Comment]"
        >{% if form.body %}{{ form.body }}{% endif %}</textarea>
        <label class="contact-form__label" for="ContactForm-body">Mesajınız</label>
      </div>

      <div class="contact-form__button">
        <button type="submit" class="contact-form__submit">Gönder</button>
      </div>
    {% endform %}
  </div>
</div>

{% stylesheet %}
  .contact-form-section {
    padding: 40px 20px;
    background-color: #ffffff;
  }
  .contact-form-section__container {
    max-width: 1200px;
    margin: 0 auto;
  }
  .contact-form-section__header {
    text-align: center;
    max-width: 800px;
    margin: 0 auto 40px;
  }
  .contact-form-section__title {
    font-size: 36px;
    font-weight: 700;
    color: #2e2a39;
    margin-bottom: 20px;
    line-height: 1.2;
  }
  .contact-form-section__description {
    font-size: 16px;
    line-height: 1.6;
    color: #5c5f62;
  }
  .contact-form-section__description p {
    margin: 0;
  }
  .contact-form {
    max-width: 750px;
    margin: 0 auto;
    width: 100%;
  }
  .visually-hidden {
    position: absolute !important;
    overflow: hidden;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    border: 0;
    clip: rect(0 0 0 0);
    word-wrap: normal !important;
  }
  .contact-form__success {
    background-color: #d4edda;
    color: #155724;
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 30px;
    border: 1px solid #c3e6cb;
  }
  .contact-form__success p {
    margin: 0;
  }
  .contact-form__errors {
    background-color: #f8d7da;
    color: #721c24;
    padding: 15px 20px;
    border-radius: 8px;
    margin-bottom: 30px;
    border: 1px solid #f5c6cb;
  }
  .contact-form__errors h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    font-weight: 600;
  }
  .contact-form__errors ul {
    margin: 0;
    padding-left: 20px;
  }
  .contact-form__errors li {
    margin-bottom: 5px;
  }
  .contact-form__errors a {
    color: #721c24;
    text-decoration: underline;
  }
  .contact-form__fields {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }
  .contact-form__field {
    position: relative;
    margin-bottom: 20px;
  }
  .contact-form__fields .contact-form__field {
    margin-bottom: 0;
  }
  .contact-form__field--error .contact-form__input {
    border-color: #dc3545;
  }
  .contact-form__input,
  .contact-form__textarea {
    width: 100%;
    padding: 20px 16px 8px 16px;
    border: 1px solid #202223;
    border-radius: 6px;
    font-size: 16px;
    font-family: inherit;
    background-color: #ffffff;
    color: #202223;
    transition: border-color 0.3s;
    box-sizing: border-box;
  }
  .contact-form__input:focus,
  .contact-form__textarea:focus {
    outline: none;
    border-color: #202223;
    border-width: 2px;
    padding: 19px 15px 7px 15px;
  }
  .contact-form__textarea {
    resize: vertical;
    max-height: 120px;
    padding-top: 20px;
  }
  .contact-form__textarea:focus {
    padding-top: 19px;
  }
  .contact-form__label {
    position: absolute;
    left: 16px;
    top: 15px;
    font-size: 16px;
    font-weight: 400;
    color: #5c5f62;
    pointer-events: none;
    transition: all 0.3s ease;
    transform-origin: left top;
  }
  .contact-form__input:focus + .contact-form__label,
  .contact-form__input.has-value + .contact-form__label,
  .contact-form__textarea:focus + .contact-form__label,
  .contact-form__textarea.has-value + .contact-form__label {
    top: 8px;
    font-size: 12px;
    color: #5c5f62;
    transform: translateY(0);
  }
  .contact-form__input:focus + .contact-form__label,
  .contact-form__textarea:focus + .contact-form__label {
    color: #202223;
  }
  .contact-form__label span {
    color: #dc3545;
  }
  .contact-form__button {
    margin-top: 30px;
  }
  .contact-form__submit {
    width: 100%;
    background-color: #3da8e2;
    color: #ffffff;
    border: none;
    padding: 16px 24px;
    border-radius: 6px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .contact-form__submit:hover {
    background-color: #2d8bc7;
  }
  .contact-form__submit:active {
    transform: translateY(1px);
  }
  @media (max-width: 768px) {
    .contact-form-section {
      padding: 30px 16px;
    }
    .contact-form-section__header {
      margin-bottom: 30px;
    }
    .contact-form-section__title {
      font-size: 28px;
    }
    .contact-form-section__description {
      font-size: 14px;
    }
    .contact-form__fields {
      grid-template-columns: 1fr;
      gap: 0;
    }
    .contact-form__fields .contact-form__field {
      margin-bottom: 20px;
    }
  }
{% endstylesheet %}

{% javascript %}
  (function () {
    function initFloatingLabels() {
      const inputs = document.querySelectorAll('.contact-form__input, .contact-form__textarea');

      inputs.forEach((input) => {
        // Check initial value
        if (input.value && input.value.trim() !== '') {
          input.classList.add('has-value');
        }

        // Handle focus
        input.addEventListener('focus', function () {
          this.classList.add('has-value');
        });

        // Handle blur
        input.addEventListener('blur', function () {
          if (this.value && this.value.trim() !== '') {
            this.classList.add('has-value');
          } else {
            this.classList.remove('has-value');
          }
        });

        // Handle input (for real-time updates)
        input.addEventListener('input', function () {
          if (this.value && this.value.trim() !== '') {
            this.classList.add('has-value');
          } else {
            this.classList.remove('has-value');
          }
        });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initFloatingLabels);
    } else {
      initFloatingLabels();
    }
  })();
{% endjavascript %}

{% schema %}
{
  "name": "Contact Form",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_header",
      "label": "Show header",
      "default": true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Reach Out and We'll Handle the Rest"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Whether it's product info, shipping details, or help with an order, we're ready to assist. Fill in the form below or e-mail us. Please include your order number if you have one so we can take care of your request as quickly as possible."
    }
  ],
  "presets": [
    {
      "name": "Contact Form"
    }
  ]
}
{% endschema %}
